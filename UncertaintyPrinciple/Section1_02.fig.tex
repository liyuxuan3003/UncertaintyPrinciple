\documentclass{xStandalone}

\begin{document}
\begin{tikzpicture}

\foreach \x in {-5,-4.99,...,5}
{
    \path (\x,0) coordinate (C);
    \fill[white!\fpeval{50*(cos(4*\x)+1)}!black] ($(C)+(-0.007,-1)$) rectangle ($(C)+(0.007,1)$);
}

\end{tikzpicture}
\end{document}